<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Research Potion â€” Clash Potion Calculator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <!-- Navbar -->
    <header class="navbar">
        <a href="index.html" class="site-title">Clash Potion Calculator</a>
        <nav>
            <div class="nav-links">
                <a class="nav-link" href="simple-calc.html">Simple</a>
                <a class="nav-link" href="builder-potion.html">Builder Potion</a>
                <a class="nav-link" href="research-potion.html">Research Potion</a>
                <a class="nav-link" href="pet-potion.html">Pet Potion</a>
            </div>
            <div class="hamburger" onclick="toggleNav()">
                <span></span><span></span><span></span>
            </div>
        </nav>
    </header>
    <main class="main-content">
        <h2>Research Potion Calculator ðŸ§ª</h2>
        <div class="form-container">
            <form id="researchForm">
                <div class="input-group">
                    <label class="input-label" for="days">Days</label>
                    <input class="input-field" id="days" name="days" type="number" min="0" value="0">
                    <label class="input-label" for="hours">Hours</label>
                    <input class="input-field" id="hours" name="hours" type="number" min="0" max="23" value="0">
                    <label class="input-label" for="minutes">Minutes</label>
                    <input class="input-field" id="minutes" name="minutes" type="number" min="0" max="59" value="0">
                </div>
                <div class="input-group">
                    <label class="input-label" for="potions">Potions</label>
                    <input class="input-field" id="potions" name="potions" type="number" min="0" max="5" value="0">
                </div>
                <div class="input-group">
                    <label class="input-label" for="boostHours">Boost left</label>
                    <input class="input-field" id="boostHours" name="boostHours" type="number" min="0" max="24"
                        value="0" placeholder="Hours">
                    <input class="input-field" id="boostMinutes" name="boostMinutes" type="number" min="0" max="59"
                        value="0" placeholder="Minutes">
                    <span style="color:var(--coc-gold);font-size:0.98em;align-self:center;">(if already started)</span>
                </div>
                <button type="submit" class="button">Calculate</button>
            </form>
            <div id="researchResult" class="result" style="display:none"></div>
        </div>
    </main>
    <footer>
        Clash Potion Calculator â€” Open source on <a href="https://github.com/" target="_blank">GitHub</a>
    </footer>
    <script src="js/utils.js"></script>
    <script src="js/calculator.js"></script>
    <script>
        function toggleNav() {
            document.querySelector('.navbar').classList.toggle('open');
        }
        window.addEventListener('resize', () => {
            if (window.innerWidth > 800)
                document.querySelector('.navbar').classList.remove('open');
        });

        document.getElementById('researchForm').onsubmit = function (e) {
            e.preventDefault();
            let days = Number(this.days.value);
            let hours = Number(this.hours.value);
            let minutes = Number(this.minutes.value);
            let potions = Number(this.potions.value);
            let boostHours = Number(this.boostHours.value);
            let boostMinutes = Number(this.boostMinutes.value);

            let resultDiv = document.getElementById('researchResult');
            if (boostHours || boostMinutes) {
                let { resultText } = calcPotion({
                    mode: "research",
                    days, hours, minutes,
                    boostHours, boostMinutes
                });
                resultDiv.textContent = resultText;
            } else if (potions) {
                let { resultText } = calcPotion({
                    mode: "research",
                    days, hours, minutes,
                    potions
                });
                resultDiv.textContent = resultText;
            } else {
                let { resultText } = calcPotion({
                    mode: "simple",
                    days, hours, minutes
                });
                resultDiv.textContent = resultText;
            }
            resultDiv.style.display = "block";
        }
    </script>
</body>

</html>